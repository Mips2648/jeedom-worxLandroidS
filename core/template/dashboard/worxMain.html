<div class="eqLogic-widget eqLogic allowResize"
  style="width: #width#;height : #height#;border:#border#;border-radius:#border-radius#;background-color: #background-color#;color: #color#;#style#;text-align:center;"
  data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#">
  <center class="widget-name display:inline"><a href="#eqLink#"
      style="font-weight:bold;font-size : 1.1em;">#name_display# #object_name#</a>
    <span class="cmd refresh cursor pull-right" data-cmd_id="#refresh_id#">
      <i class='fas fa-sync' style="font-size : 0.9em;float:right;"
        onclick="jeedom.cmd.execute({id: #refresh_id#});"></i>
    </span>
  </center>

  <div align="center"
    style="display: inline-block;;margin-top:1px;margin-bottom:10px;margin-left:auto; margin-right:auto;">

    <link rel="stylesheet" href="plugins/worxLandroidS/core/template/dashboard/#theme#/landroid.css">

    <div class="container2-landroid" style="#backgroundColor#">
      #worxImg#
      <div title="#statusDescription#" style="font-size: 0.8em;position : relative; top:7px;">
        #updated#
      </div>
      <div
        style="background-size: 100% 100%; position: relative; left: -135px;top:-5px;  width: 30px; height: 15px; z-index: 3; ">
        <div
          style="background-size: 100% 100%; top:30px;position: relative; left:35px;  top: 0px;width: 20px; height: 15px; z-index: 4; ">
          <span title="#battery_percent#%"
            style="position: relative; left: -45px;top:-5px;width: 30px; height: 15px; z-index: 3; display:inline-block">
            <img src="plugins/worxLandroidS/core/template/dashboard/#theme#/img/#batteryIMG#" alt="#battery_percent#%"
              style="width: 30px; height: 15px; z-index: 3; ">
          </span>
          <span title="#rssi#" style="position: relative; left: -10px;top:-25px;display:inline-block">
            <i class='icon #wifiIconClass# '></i>
          </span>
          <span style="position: relative; left: -10px;top:-45px;display:inline-block">
            <a class=" btn cmd" data-cmd_id="#start_id#"
              style="cursor: pointer;position : relative; left:170px; top:0px; width : 5px" title="Démarrer"
              onclick="jeedom.cmd.execute({id: #start_id#});">
              <i style="font-size: 1em; padding-top: 2px; margin-right: 2px" class="fas fa-play pull-right"></i></a>
            <a class="btn cmd" data-cmd_id="#pause_id#"
              style="cursor: pointer;position : relative; top:-30px; left:200px; " title="Pause"
              onclick="jeedom.cmd.execute({id: #pause_id#});"><i style=" padding-top: 2px; margin-right: 3px"
                class="fas fa-pause pull-right"></i></a>
            <a class="btn cmd" data-cmd_id="#home_id#"
              style="cursor: pointer;position : relative; top: -60px; left: 230px;width : 5px;" title="Retour à la base"
              onclick="jeedom.cmd.execute({id: #home_id#});"><i style="padding-top: 2px; margin-right: 2px"
                class="fas fa-home pull-right"></i></a>
            <a style="position : relative; top: -50px; left: 220px;width : 5px" title="#error_description#"><i
                style="font-size: 3em; padding-top: 2px; margin-right: 2px" class="#errorIcon#"></i></a>
            <a class="btn cmd" style="cursor: pointer;position : absolute; left:-35px; top:27px;"
              title="Durée de vie des lames actuelle #blades_current_on# h">
              <i style=" font-size: 2.2em;z-index:4;;color:#bladesDurationColor#"
                class="fas jeedom-ventilo pull-right"></i></a>
            <a data-cmd_id="#cutedge_id#"
              style="display:none;cursor: pointer;position : absolute; top: 189px; left: 270px;width : 5px;z-index:6"
              title="Couper bordure" onclick="jeedom.cmd.execute({id: #cutedge_id#});">
              <i style="font-size: 3.5em; padding-top: 2px; margin-right: 2px; z-index:4"
                class="fas nature-grass pull-right"></i></a>
          </span>
          <div style="position: absolute;top:120px;left:230px;#orientation_pitch_visible#" title="Tangage">
            ↕#orientation_pitch#°
          </div>
          <div style="position: absolute;top:180px;left:-35px;#orientation_roll_visible#" title="Roulis">
            ↕#orientation_roll#°
          </div>
          <div style="position: absolute;top:90px;left:150px;#orientation_yaw_visible#" title="Direction">
            ↣#orientation_yaw#°
          </div>
        </div>
      </div>
      <span
        style="font-weight:bold;font-size:1em;position:relative;top: -30px;width:150px;#status_description_visible#"><br />
        <br />#status_description#
        <span style="#status_id_visible#"> (#status_id#) </span>
        <span style="font-weight:bold;color:#errorColor#"> <br /> <span style="#error_description_visible#">
            #error_description#
          </span>
          <span style="#error_id_visible#"> (#error_id#) </span> </span>
    </div>

    <div>
      <div align="center" style="font-size: 0.9em; #zone_current_visible#"> Zone départ: #zone_current# </div>

      <div align="center>" style="display: block; font-size: 1em;#statistics_distance_visible#;margin: 3px 0;"> Distance
        totale: #statistics_distance# m en #mower_work_time# minutes</div>
      <span style="display: block; #battery_cycles_total_visible#;margin: 3px 0;"> #battery_cycles_total# cycles de
        charge
        batterie </span>
      <span style="display: block; #gps_latitude_visible#;margin: 3px 0;"> Coordonnées GPS: #gps_latitude# ,
        #gps_longitude# </span>
      <div style="display: inline-block; margin: 3px 0">


        <span id="rain" style="font-weight:bold; margin: 3px 0;">
          #raindelay#
        </span>
      </div>
      <!--
        <div style="#set_schedule_visible#; margin-bottom: 2px"> #cmdaction# </div>
        <span style="#virtualInfo_visible#"> #cmd# </span>
    -->
    </div>
    <div style="display: flex; flex-wrap:wrap; width: auto; margin: 0 10px">#daySetup#</div>
  </div>
</div>
<script>
  function setSchedule(debut, fin, numjour, bordure, toggle, onoff, on_id, off_id) {
    if (toggle == 2) {
      if (onoff) {
        jeedom.cmd.execute({ id: on_id });
      }
      else {
        jeedom.cmd.execute({ id: off_id });
      }
    }
    else {
      // fonction de changement de planification
      var t_fin = new Date('1970-01-01T' + fin + 'Z');
      var t_debut = new Date('1970-01-01T' + debut + 'Z');
      var diff = t_fin - t_debut;
      var minutes = Math.floor((diff / 1000) / 60);
      var retour = '';
      if (toggle == 1) { if (bordure == 1) { bordure = 0; } else { bordure = 1 } }

      if (minutes >= 0) {
        // jeedom.cmd.execute({id:#set_schedule_id#, value:{ message: numjour ';'+debut+';'+minutes+';'+bordure }});
        retour += numjour + ';' + debut + ';' + minutes + ';' + bordure;
      }
      else {
        minutes = 0;
        retour = numjour + ';' + debut + ';' + minutes + ';' + bordure;
      }
      // jeedom.cmd.execute({ id: #set_schedule_id#, value: { message: retour } })
    }
  }

</script>